# @layout post
# @title cygwinでsvn upgradeに失敗する。
# @date 2012-8-28
# @tags cygwin

本格的にcygwinをputty代替として使っていく気になったので、Subversionに関
してもTortoiseSVNからcygwin版のSubversionを使用することにした。
#+BEGIN_SRC sh
apt-cyg install subversion
#+END_SRC
インストール後、今まで使用していたリポジトリで =svn status= を実行したら、upgradeしろと言われたので
してみたところ、下記のエラーが。
#+BEGIN_SRC sh
$ svn upgrade
svn: E200029: Couldn't perform atomic initialization
svn: E200030: SQLite compiled for 3.7.13, but running with 3.7.3
#+END_SRC

ぐぐってみたところ、TortoiseSVNがSQLite3を使用しているのが原因のようだっ
たので、TortoiseSVNを削除してらリトライ。でも変化せず。
#+BEGIN_SRC sh
$ sqlite3
SQLite header and source version mismatch
2010-10-08 02:34:02 2677848087c9c090efb17c1893e77d6136a9111d
2012-06-11 02:05:22 f5b5a13f7394dc143aa136f1d4faba6839eaa6dc
#+END_SRC

ソースと実行ファイルでバージョンの不一致がおこっている模様。でもソース
からビルドした記憶はないんだけどなぜだろう。
よくわからないので、 =apt-cyg find sqlite3= して関連するパッケージを調べて全て削除した。
#+BEGIN_SRC sh
$ apt-cyg remove libsqlite3-devel libsqlite3_0 odbc-sqlite3 sqlite3 sqlite3-debuginfo
Removing libsqlite3-devel
Package libsqlite3-devel removed
Removing libsqlite3_0
Package libsqlite3_0 removed
Package odbc-sqlite3 is not installed, skipping
Removing sqlite3
Package sqlite3 removed
#+END_SRC

そして、再インストール。
#+BEGIN_SRC sh
$ apt-cyg install sqlite3
#+END_SRC

今度はうまくいった。
#+BEGIN_SRC sh
$ svn upgrade
Upgraded '*************'
Upgraded '*************'
 ：
#+END_SRC
